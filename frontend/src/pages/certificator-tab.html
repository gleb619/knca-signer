<!-- Certificate Manager Tab -->
<div class="max-w-7xl mx-auto" x-data="certificatorTab"
     x-transition:enter="transition ease-out duration-300"
     x-transition:enter-end="opacity-100 transform translate-x-0"
     x-transition:enter-start="opacity-0 transform translate-x-4"
     x-transition:leave="transition ease-in duration-200"
     x-transition:leave-end="opacity-0 transform -translate-x-4"
     x-transition:leave-start="opacity-100 transform translate-x-0">
    <div class="flex flex-col lg:flex-row gap-6" x-cloak x-show="activeTab === 'certificate-authority'">

        <!-- Sidebar -->
        <div class="w-full lg:w-1/4">
            <div class="bg-white rounded-lg shadow-sm p-4">
                <h4 class="text-base font-semibold mb-3 text-gray-700">Certificate Authorities</h4>

                <!-- Create CA Button -->
                <button :class="activeSubTab === 'create' ? 'bg-blue-300 text-blue-800' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'"
                        @click="activeSubTab = 'create'"
                        class="w-full py-3 px-4 mb-3 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" stroke-linecap="round" stroke-linejoin="round"
                              stroke-width="2"/>
                    </svg>
                    Create CA
                </button>

                <div class="space-y-1" x-show="certificates.length > 0">
                    <template :key="caStructure.alias" x-for="caStructure in certificates">
                        <button :class="activeSubTab === caStructure.alias ? 'bg-blue-300 text-blue-800' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'"
                                @click="activeSubTab = caStructure.alias"
                                class="w-full py-3 px-4 mb-2 rounded-lg font-medium transition-colors duration-200 flex items-center justify-between">
                            <span x-text="`CA: ${caStructure.alias}`"></span>
                            <span class="text-xs bg-white bg-opacity-50 rounded-full px-2 py-1"
                                  x-text="`${caStructure.userCertificates.length + caStructure.legalCertificates.length} certs`"></span>
                        </button>
                    </template>
                </div>

                <!-- Empty state for sidebar -->
                <div class="text-center py-4 text-gray-500" x-show="certificates.length === 0">
                    <svg class="w-8 h-8 mx-auto mb-2 text-gray-400" fill="none" stroke="currentColor"
                         viewBox="0 0 24 24">
                        <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                              stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                    </svg>
                    <p class="text-xs">No CAs yet</p>
                </div>

                <!-- Help Section -->
                <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                    <h5 class="text-sm font-medium text-blue-700 mb-2">How it works</h5>
                    <p class="text-xs text-blue-600" x-show="activeSubTab === 'create'">
                        Create a new Certificate Authority to manage user and legal certificates.
                    </p>
                    <p class="text-xs text-blue-600" x-show="activeSubTab !== 'create'">
                        View and manage certificates issued by this Certificate Authority.
                    </p>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="w-full lg:w-3/4">
            <!-- Global Loading Overlay -->
            <div class="fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-50"
                 x-show="generatingCA || generatingUser || generatingLegal">
                <div class="bg-white rounded-lg p-6 max-w-sm w-full mx-4">
                    <div class="flex items-center space-x-3">
                        <svg class="animate-spin h-6 w-6 text-blue-600" fill="none" stroke="currentColor"
                             viewBox="0 0 24 24">
                            <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0-4H9m11 11v-5h-.581m0 0H15m5.356-4A8.001 8.001 0 0014.418 15" stroke-linecap="round" stroke-linejoin="round"
                                  stroke-width="2"/>
                        </svg>
                        <div>
                            <p class="font-medium text-gray-900"
                               x-text="generatingCA ? 'Creating Certificate Authority...' : generatingUser ? 'Generating User Certificate...' : 'Generating Legal Certificate...'"></p>
                            <p class="text-sm text-gray-500">Please wait...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create CA Tab -->
            <template x-if="activeSubTab === 'create'">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Create Certificate Authority</h2>
                    <p class="text-gray-600 mb-6">
                        Create a new Certificate Authority to issue user and legal certificates.
                    </p>

                    <!-- CA Generation Form -->
                    <div class="max-w-md">
                        <label class="block text-sm font-medium text-gray-700 mb-2" for="caAlias">
                            CA Alias (optional - leave empty for auto-generated)
                        </label>
                        <input class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4"
                               id="caAlias"
                               placeholder="e.g., corporate-ca, department-ca"
                               type="text"
                               x-model="newCAAlias">
                        <button :disabled="generatingCA"
                                @click="generateCA"
                                class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                 x-show="!generatingCA">
                                <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" stroke-linecap="round" stroke-linejoin="round"
                                      stroke-width="2"/>
                            </svg>
                            <svg class="w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                 x-show="generatingCA">
                                <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0-4H9m11 11v-5h-.581m0 0H15m5.356-4A8.001 8.001 0 0014.418 15"
                                      stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                            </svg>
                            <span x-text="generatingCA ? 'Creating CA...' : 'Create CA'"></span>
                        </button>
                    </div>
                </div>
            </template>

            <!-- CA Certificate Details View - Refactored using regular x-for loop -->
            <template x-if="activeSubTab !== 'create'">
                <div x-show="certificates.length > 0">
                    <template :key="caStructure.alias" x-for="(caStructure, caIdx) in certificates">
                        <div x-show="activeSubTab === caStructure.alias"
                             x-transition:enter="transition ease-out duration-300"
                             x-transition:enter-end="opacity-100 transform translate-x-0"
                             x-transition:enter-start="opacity-0 transform translate-x-4">

                            <!-- CA Header -->
                            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg">
                                            CA
                                        </div>
                                        <div>
                                            <h2 class="text-2xl font-bold text-gray-900">
                                                <span x-text="caStructure.alias"></span>
                                                <button @click="copyToClipboard(JSON.stringify(caStructure, null, 2))"
                                                        class="text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100"
                                                        title="Copy json">
                                                    <svg class="w-5 h-5" fill="none" stroke="currentColor"
                                                         viewBox="0 0 24 24">
                                                        <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                                                              stroke-linecap="round" stroke-linejoin="round"
                                                              stroke-width="2"></path>
                                                    </svg>
                                                </button>
                                            </h2>
                                            <p class="text-gray-600"
                                               x-text="caStructure.ca.subject || 'Certificate Authority'"></p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button :disabled="generatingUser"
                                                @click="generateUser(caStructure.alias)"
                                                class="px-2.5 py-1.5 bg-green-600 text-sm text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                                 x-show="!generatingUser">
                                                <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2"/>
                                            </svg>
                                            <span x-text="generatingUser ? 'Generating...' : 'New User Cert'"></span>
                                        </button>
                                        <button :disabled="generatingLegal"
                                                @click="generateLegal(caStructure.alias)"
                                                class="px-2.5 py-1.5 bg-orange-600 text-sm text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                                 x-show="!generatingLegal">
                                                <path d="M12 6v6m0 0v6m0-6h6m-6 0H6" stroke-linecap="round"
                                                      stroke-linejoin="round" stroke-width="2"/>
                                            </svg>
                                            <span x-text="generatingLegal ? 'Generating...' : 'New Legal Cert'"></span>
                                        </button>
                                    </div>
                                </div>

                                <!-- CA Details -->
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="text-gray-500">Valid From:</span>
                                        <span class="ml-2 text-gray-900"
                                              x-text="formatDate(caStructure.ca.notBefore)"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Valid Until:</span>
                                        <span class="ml-2 text-gray-900"
                                              x-text="formatDate(caStructure.ca.notAfter)"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500">Alias:</span>
                                        <span class="ml-2 text-gray-900" x-text="caStructure.ca.alias"></span>
                                    </div>
                                    <div class="overflow-hidden text-ellipsis inline-flex"
                                         x-show="caStructure.ca.serialNumber">
                                        <span class="text-gray-500 mr-2">Serial:</span>

                                        <div class="flex items-center gap-2">
                                            <code :title="caStructure.ca.serialNumber"
                                                  class="text-xs text-gray-700 font-mono bg-gray-50 px-1 py-1 rounded flex-1 overflow-hidden text-ellipsis"
                                                  x-text="caStructure.ca.serialNumber"></code>
                                            <button @click="copyToClipboard(caStructure.ca.serialNumber)"
                                                    class="text-gray-400 hover:text-gray-600">
                                                <svg class="w-3 h-3" fill="none" stroke="currentColor"
                                                     viewBox="0 0 24 24">
                                                    <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                                                          stroke-linecap="round" stroke-linejoin="round"
                                                          stroke-width="2"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <!--<button @click="copyToClipboard(caStructure.ca.serialNumber)"
                                                class="ml-2 text-blue-600 hover:text-blue-800 underline" title="Click to copy"
                                                :title="caStructure.ca.serialNumber"
                                                x-text="caStructure.ca.serialNumber"></button>-->
                                    </div>
                                    <div x-show="caStructure.ca.publicKeyAlgorithm || caStructure.ca.keySize">
                                        <span class="text-gray-500">Key:</span>
                                        <span class="ml-2 text-gray-900" x-text="formatKeyInfo(caStructure.ca)"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- User Certificates Cards -->
                            <div class="mb-6">
                                <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                    <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path clip-rule="evenodd"
                                              d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                                              fill-rule="evenodd"/>
                                    </svg>
                                    <span x-text="`User Certificates (${caStructure.userCertificates.length})`"></span>
                                </h3>

                                <div class="text-gray-600 text-sm italic mb-4"
                                     x-show="caStructure.userCertificates.length === 0">
                                    No user certificates for this CA yet.
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"
                                     x-show="caStructure.userCertificates.length > 0">
                                    <template :key="cert.alias" x-for="(cert, certIdx) in caStructure.userCertificates">
                                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                                            <!-- Header with avatar and main info -->
                                            <div class="flex items-start gap-4 mb-4">
                                                <div :class="getAvatarPattern(cert)"
                                                     class="w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-base">
                                                    <span x-text="generateInitials(cert)"></span>
                                                </div>
                                                <div class="flex-1 min-w-0">
                                                    <h4 class="font-semibold text-gray-900 truncate mb-1"
                                                        x-text="`User Certificate #${certIdx + 1}`"></h4>
                                                    <p :title="getFullName(cert)" class="text-sm text-gray-600 truncate"
                                                       x-text="getFullName(cert)"></p>
                                                    <p class="text-xs text-gray-500 mt-1" x-text="cert.alias"></p>
                                                </div>
                                                <button @click="copyToClipboard(JSON.stringify(cert, null, 2))"
                                                        class="text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100"
                                                        title="Copy json">
                                                    <svg class="w-5 h-5" fill="none" stroke="currentColor"
                                                         viewBox="0 0 24 24">
                                                        <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                                                              stroke-linecap="round" stroke-linejoin="round"
                                                              stroke-width="2"/>
                                                    </svg>
                                                </button>
                                            </div>

                                            <!-- Personal Details -->
                                            <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                                                <div>
                                                    <span class="text-gray-500 text-xs uppercase font-medium">IIN</span>
                                                    <div class="flex items-center gap-1">
                                                        <span class="text-gray-900 font-mono"
                                                              x-text="cert.iin || 'N/A'"></span>
                                                        <button @click="copyToClipboard(cert.iin)" class="text-gray-400 hover:text-gray-600"
                                                                x-show="cert.iin">
                                                            <svg class="w-3 h-3" fill="none" stroke="currentColor"
                                                                 viewBox="0 0 24 24">
                                                                <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                                                                      stroke-linecap="round" stroke-linejoin="round"
                                                                      stroke-width="2"/>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div>
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Email</span>
                                                    <p :title="getCertificateDetails(cert).email || 'No email'"
                                                       class="text-gray-900 truncate text-sm"
                                                       x-text="getCertificateDetails(cert).email || 'No email'"></p>
                                                </div>
                                            </div>

                                            <!-- Certificate Details -->
                                            <div class="border-t border-gray-100 pt-3 space-y-2">
                                                <div class="grid grid-cols-2 gap-3 text-sm">
                                                    <div>
                                                        <span class="text-gray-500 text-xs uppercase font-medium">Valid From</span>
                                                        <p class="text-gray-900"
                                                           x-text="formatDate(cert.notBefore)"></p>
                                                    </div>
                                                    <div>
                                                        <span class="text-gray-500 text-xs uppercase font-medium">Valid Until</span>
                                                        <p class="text-gray-900" x-text="formatDate(cert.notAfter)"></p>
                                                    </div>
                                                </div>

                                                <div x-show="cert.serialNumber">
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Serial Number</span>
                                                    <div class="flex items-center gap-2 mt-1">
                                                        <code :title="cert.serialNumber"
                                                              class="text-xs text-gray-700 font-mono bg-gray-50 px-2 py-1 rounded flex-1 overflow-hidden text-ellipsis"
                                                              x-text="cert.serialNumber"></code>
                                                        <button @click="copyToClipboard(cert.serialNumber)"
                                                                class="text-gray-400 hover:text-gray-600">
                                                            <svg class="w-3 h-3" fill="none" stroke="currentColor"
                                                                 viewBox="0 0 24 24">
                                                                <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                                                                      stroke-linecap="round" stroke-linejoin="round"
                                                                      stroke-width="2"/>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>

                                                <div x-show="cert.publicKeyAlgorithm || cert.keySize">
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Key Info</span>
                                                    <p class="text-gray-900 text-sm" x-text="formatKeyInfo(cert)"></p>
                                                </div>

                                                <div class="mt-2" x-show="cert.issuer">
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Issuer</span>
                                                    <p :title="cert.issuer" class="text-gray-700 text-sm truncate"
                                                       x-text="cert.issuer"></p>
                                                </div>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>

                            <!-- Legal Certificates Cards -->
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                    <svg class="w-5 h-5 text-orange-600" fill="currentColor" viewBox="0 0 13 13">
                                        <path d="m 10.103631,5.49525 0,3.23936 -0.700485,0 0,-1.85077 -0.549612,1.85077 -0.765932,0 -0.547456,-1.84978 0,1.84978 -0.700486,0 0,-3.19578 0,-0.0436 0.04357,0 0.984961,0 0.60533,2.01926 0.599301,-2.01926 1.030806,0 z m -6.207291,0 0,0.66443 0.935359,0 0,2.5749 0.745631,0 0,-2.5749 0.911155,0 0,-0.66443 -2.592145,0 z m 6.522495,-1.91408 c 1.889388,1.88935 1.889767,4.94793 0,6.83764 -1.889476,1.88947 -4.947903,1.88976 -6.837641,0 -1.889446,-1.88942 -1.889796,-4.94788 -2.9e-5,-6.83764 1.889418,-1.88939 4.947932,-1.88977 6.83767,0 z M 7,1 C 3.686282,1 1,3.68628 1,7 c 0,3.31369 2.686282,6 6,6 3.313718,0 6,-2.68631 6,-6 C 13,3.68628 10.313718,1 7,1 Z"/>
                                    </svg>
                                    <span x-text="`Legal Certificates (${caStructure.legalCertificates.length})`"></span>
                                </h3>

                                <div class="text-gray-600 text-sm italic mb-4"
                                     x-show="caStructure.legalCertificates.length === 0">
                                    No legal certificates for this CA yet.
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"
                                     x-show="caStructure.legalCertificates.length > 0">
                                    <template :key="cert.alias" x-for="cert in caStructure.legalCertificates">
                                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-5 hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
                                            <!-- Header with avatar and main info -->
                                            <div class="flex items-start gap-4 mb-4">
                                                <div :class="getAvatarPattern(cert)"
                                                     class="w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-base">
                                                    <span x-text="generateInitials(cert)"></span>
                                                </div>
                                                <div class="flex-1 min-w-0">
                                                    <h4 :title="getCertificateDetails(cert).organization || cert.alias"
                                                        class="font-semibold text-gray-900 truncate mb-1"
                                                        x-text="getCertificateDetails(cert).organization || cert.alias"></h4>
                                                    <p :title="getFullName(cert) || 'Legal Certificate'"
                                                       class="text-sm text-gray-600 truncate"
                                                       x-text="getFullName(cert) || 'Legal Certificate'"></p>
                                                    <p class="text-xs text-gray-500 mt-1" x-text="cert.alias"></p>
                                                </div>
                                                <button @click="copyToClipboard(JSON.stringify(cert, null, 2))"
                                                        class="text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100"
                                                        title="Copy json">
                                                    <svg class="w-5 h-5" fill="none" stroke="currentColor"
                                                         viewBox="0 0 24 24">
                                                        <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                                                              stroke-linecap="round" stroke-linejoin="round"
                                                              stroke-width="2"/>
                                                    </svg>
                                                </button>
                                            </div>

                                            <!-- Personal Details -->
                                            <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                                                <div>
                                                    <span class="text-gray-500 text-xs uppercase font-medium">IIN</span>
                                                    <div class="flex items-center gap-1">
                                                        <span class="text-gray-900 font-mono"
                                                              x-text="cert.iin || 'N/A'"></span>
                                                        <button @click="copyToClipboard(cert.iin)" class="text-gray-400 hover:text-gray-600"
                                                                x-show="cert.iin">
                                                            <svg class="w-3 h-3" fill="none" stroke="currentColor"
                                                                 viewBox="0 0 24 24">
                                                                <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                                                                      stroke-linecap="round" stroke-linejoin="round"
                                                                      stroke-width="2"/>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div>
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Email</span>
                                                    <p :title="getCertificateDetails(cert).email || 'No email'"
                                                       class="text-gray-900 truncate text-sm"
                                                       x-text="getCertificateDetails(cert).email || 'No email'"></p>
                                                </div>
                                            </div>

                                            <!-- Organization Details -->
                                            <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                                                <div>
                                                    <span class="text-gray-500 text-xs uppercase font-medium">BIN</span>
                                                    <div class="flex items-center gap-1">
                                                        <span class="text-gray-900 font-mono"
                                                              x-text="getCertificateDetails(cert).bin || cert.bin || 'N/A'"></span>
                                                        <button @click="copyToClipboard(getCertificateDetails(cert).bin || cert.bin)"
                                                                class="text-gray-400 hover:text-gray-600"
                                                                x-show="getCertificateDetails(cert).bin || cert.bin">
                                                            <svg class="w-3 h-3" fill="none" stroke="currentColor"
                                                                 viewBox="0 0 24 24">
                                                                <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                                                                      stroke-linecap="round" stroke-linejoin="round"
                                                                      stroke-width="2"/>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>
                                                <div x-show="getCertificateDetails(cert).businessCategory">
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Category</span>
                                                    <p class="text-gray-900 truncate text-sm"
                                                       x-text="getCertificateDetails(cert).businessCategory"></p>
                                                </div>
                                            </div>

                                            <!-- Certificate Details -->
                                            <div class="border-t border-gray-100 pt-3 space-y-2">
                                                <div class="grid grid-cols-2 gap-3 text-sm">
                                                    <div>
                                                        <span class="text-gray-500 text-xs uppercase font-medium">Valid From</span>
                                                        <p class="text-gray-900"
                                                           x-text="formatDate(cert.notBefore)"></p>
                                                    </div>
                                                    <div>
                                                        <span class="text-gray-500 text-xs uppercase font-medium">Valid Until</span>
                                                        <p class="text-gray-900" x-text="formatDate(cert.notAfter)"></p>
                                                    </div>
                                                </div>

                                                <div x-show="cert.serialNumber">
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Serial Number</span>
                                                    <div class="flex items-center gap-2 mt-1">
                                                        <code :title="cert.serialNumber"
                                                              class="text-xs text-gray-700 font-mono bg-gray-50 px-2 py-1 rounded flex-1 overflow-hidden text-ellipsis"
                                                              x-text="cert.serialNumber"></code>
                                                        <button @click="copyToClipboard(cert.serialNumber)"
                                                                class="text-gray-400 hover:text-gray-600">
                                                            <svg class="w-3 h-3" fill="none" stroke="currentColor"
                                                                 viewBox="0 0 24 24">
                                                                <path d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"
                                                                      stroke-linecap="round" stroke-linejoin="round"
                                                                      stroke-width="2"/>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                </div>

                                                <div x-show="cert.publicKeyAlgorithm || cert.keySize">
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Key Info</span>
                                                    <p class="text-gray-900 text-sm" x-text="formatKeyInfo(cert)"></p>
                                                </div>

                                                <div class="mt-2" x-show="getCertificateDetails(cert).position">
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Position</span>
                                                    <p class="text-gray-700 text-sm truncate"
                                                       x-text="translate(getCertificateDetails(cert).position) || getCertificateDetails(cert).position"></p>
                                                </div>

                                                <div x-show="cert.issuer">
                                                    <span class="text-gray-500 text-xs uppercase font-medium">Issuer</span>
                                                    <p :title="cert.issuer" class="text-gray-700 text-sm truncate"
                                                       title="cert.issuer" x-text="cert.issuer"></p>
                                                </div>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </template>
        </div>
    </div>
</div>
