<!-- Websocket Section -->
<div class="mt-4 p-3 bg-blue-50 rounded-lg">
    <h5 class="text-sm font-medium text-blue-700 mb-2">WebSocket Connection</h5>
    <div class="flex items-center space-x-2 mb-3">
        <div :class="isConnected ? 'bg-green-500' : 'bg-red-500'" class="w-3 h-3 rounded-full"></div>
        <span class="text-sm text-blue-700"
              x-text="translate('ncalayerLabel') + ': ' + (isConnected ? translate('connected') : translate('disconnected'))"></span>
    </div>

    <!-- Collapsible Logs -->
    <details class="mt-3">
        <summary
                class="flex items-center justify-between cursor-pointer hover:bg-blue-100 p-2 rounded transition-colors">
            <span class="text-sm font-medium text-blue-700">WebSocket Logs</span>
            <svg class="w-4 h-4 text-blue-500 transform transition-transform duration-200" fill="none"
                 stroke="currentColor" viewBox="0 0 24 24">
                <path d="M19 9l-7 7-7-7" stroke-linecap="round" stroke-linejoin="round"
                      stroke-width="2"></path>
            </svg>
        </summary>
        <div class="mt-2 max-h-128 overflow-y-auto bg-white rounded m-2 border">
            <div class="text-xs text-gray-500 italic" x-show="logs.length === 0">No logs yet</div>
            <div x-show="logs.length > 0">
                <template :key="log.direction + log.timestamp + logIdx" x-for="(log, logIdx) in logs">
                    <div :class="log.direction === 'sent' ? 'bg-blue-300' : (log.success ? 'bg-green-300' : 'bg-red-300')"
                         class="text-xs font-mono py-1">
                        <div class="flex">
                            <span class="text-white pl-1" x-text="log.timestamp"></span>
                            <span :class="log.direction === 'sent' ? 'bg-blue-500' : 'bg-green-500'"
                                  class="ml-auto mr-2 px-1 rounded text-white text-xs"
                                  x-text="log.direction === 'sent' ? '→' : '←'"></span>
                        </div>
                        <pre :title="log.message"
                             class="ml-1 text-gray-800 break-all overflow-hidden text-ellipsis p-1"
                             x-text="log.message"></pre>
                    </div>
                </template>
            </div>
        </div>
    </details>
</div>
